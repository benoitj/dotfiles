#!/bin/bash

set -o nounset
set -o errexit

DMENU="dmenu -l 3 -i -c -bw 3"

screen-primary() {
  echo $(xrandr -q | grep " connected" | grep primary | awk -e '{print $1}')
}

screen-secondary() {
  echo $(xrandr -q | grep " connected" | grep -v primary | awk -e '{print $1}')
}

extend_screen() {
  mode="--right-of"

  primary=$(screen-primary)
  additional=$(screen-secondary)

  xrandr --output $additional --auto $mode $primary
}

choices="extend\nmirror\nManual selection"

chosen=$(echo -e "$choices" | $DMENU -p "Extend display")

case "$chosen" in
  extend) extend_screen ;;
  mirror) extend_screen -m ;;
  "Manual selection") arandr ;;
esac
